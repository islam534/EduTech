<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="description" content="AI-powered learning platform with courses, community, mentorship, and eco-friendly products featuring interactive 3D visualizations.">
  <title>AI-Powered Eco Learning Platform</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.153.0/build/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.153.0/examples/js/controls/OrbitControls.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.153.0/examples/js/helpers/VertexNormalsHelper.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary-dark: rgb(50, 142, 110);
      --primary-mid: rgb(103, 174, 110);
      --primary-light: rgb(144, 198, 124);
      --accent: rgb(225, 238, 188);
      --bg-dark: #1a2b2a;
      --bg-light: #f5f7e9;
      --text-dark: #1a2b2a;
      --text-light: #fff;
    }
    html, body {
      font-family: 'Inter', sans-serif;
      scroll-behavior: smooth;
      background: linear-gradient(135deg, var(--primary-dark), var(--primary-mid), var(--primary-light));
      color: var(--text-light);
      margin: 0;
      padding: 0;
      overflow-x: hidden;
      box-sizing: border-box;
      width: 100%;
      padding-top: 80px;
      transition: background 0.5s ease, color 0.5s ease;
    }
    body.dark-mode {
      background: linear-gradient(135deg, var(--bg-dark), #2e4a47);
      color: var(--text-light);
    }
    * {
      box-sizing: border-box;
    }
    .sticky-header {
      position: fixed;
      top: 0;
      width: 100%;
      max-width: 100vw;
      z-index: 1000;
      background: rgba(50, 142, 110, 0.9);
      backdrop-filter: blur(12px);
      padding: 1rem 2rem;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
      transition: transform 0.3s ease, opacity 0.3s ease, visibility 0.3s ease, background 0.5s ease;
    }
    .sticky-header.hidden {
      transform: translateY(-100%);
      opacity: 0;
      visibility: hidden;
    }
    .sticky-header.scrolled {
      background: rgba(103, 174, 110, 0.95);
    }
    .nav-links {
      display: flex;
      gap: 1rem;
      flex-wrap: wrap;
      margin: 0;
      padding: 0;
      list-style: none;
    }
    .nav-links a {
      color: var(--accent);
      text-decoration: none;
      padding: 0.75rem 1.5rem;
      font-weight: 600;
      border-radius: 8px;
      transition: background 0.3s, color 0.3s, transform 0.2s, scale 0.2s;
    }
    .nav-links a:hover, .nav-links a.active {
      background: var(--primary-light);
      color: var(--text-dark);
      transform: scale(1.05);
    }
    .hamburger {
      display: none;
      font-size: 2rem;
      cursor: pointer;
      transition: color 0.3s, transform 0.3s;
      color: var(--accent);
    }
    .hamburger.active {
      content: 'âœ•';
      transform: rotate(180deg);
    }
    .hamburger:hover {
      color: var(--primary-light);
      transform: rotate(90deg);
    }
    .theme-toggle {
      background: none;
      border: none;
      color: var(--accent);
      font-size: 1.5rem;
      cursor: pointer;
      transition: color 0.3s, transform 0.3s;
    }
    .theme-toggle:hover {
      color: var(--primary-light);
      transform: scale(1.1);
    }
    .scroll-progress {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 0;
      height: 4px;
      background: var(--primary-light);
      z-index: 1001;
      transition: width 0.3s ease;
    }
    .back-to-top {
      position: fixed;
      bottom: 1rem;
      right: 1rem;
      background: var(--primary-dark);
      color: var(--accent);
      padding: 0.5rem 1rem;
      border-radius: 50%;
      font-size: 1.5rem;
      cursor: pointer;
      display: none;
      z-index: 1002;
      transition: opacity 0.3s, transform 0.3s;
    }
    .back-to-top.visible {
      display: block;
      opacity: 1;
      transform: scale(1);
    }
    .back-to-top:hover {
      transform: scale(1.1);
      background: var(--primary-mid);
    }
    .card {
      background: var(--bg-light);
      border-radius: 12px;
      padding: 2rem;
      transition: transform 0.4s, box-shadow 0.4s;
      transform: perspective(1200px) rotateY(0deg);
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
      width: 100%;
      max-width: 100%;
      position: relative;
      overflow: hidden;
    }
    .card:hover, .card:active {
      transform: perspective(1200px) rotateY(5deg) translateY(-12px);
      box-shadow: 0 12px 40px rgba(0, 0, 0, 0.25);
    }
    .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(120deg, transparent, rgba(255, 255, 255, 0.1), transparent);
      animation: shimmer 5s infinite;
    }
    .section {
      min-height: 100vh;
      padding: 5rem 2rem;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: 100%;
      max-width: 100vw;
      position: relative;
      overflow: hidden;
      background-size: cover;
      background-position: center;
    }
    .section::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: inherit;
      z-index: -1;
      transform: translateY(var(--parallax-offset, 0));
      transition: transform 0.3s ease;
    }
    .three-canvas {
      height: 300px;
      width: 100%;
      max-width: 400px;
      margin: 0 auto;
      border-radius: 10px;
      overflow: hidden;
      position: relative;
    }
    .three-canvas::after {
      content: attr(data-tooltip);
      position: absolute;
      bottom: -2rem;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.7);
      color: #fff;
      padding: 0.5rem 1rem;
      border-radius: 4px;
      font-size: 0.9rem;
      opacity: 0;
      transition: opacity 0.3s;
      pointer-events: none;
    }
    .three-canvas:hover::after {
      opacity: 1;
    }
    .form-input, .form-textarea {
      width: 100%;
      padding: 0.75rem;
      border: 1px solid var(--primary-mid);
      border-radius: 8px;
      background: var(--accent);
      transition: border-color 0.3s, box-shadow 0.3s;
    }
    .form-input:focus, .form-textarea:focus {
      outline: none;
      border-color: var(--primary-dark);
      box-shadow: 0 0 8px rgba(50, 142, 110, 0.3);
    }
    .form-textarea { resize: vertical; min-height: 120px; }
    .form-message { transition: opacity 0.3s; }
    .btn-primary {
      padding: 0.75rem 2rem;
      background: var(--primary-dark);
      color: var(--accent);
      border-radius: 8px;
      font-weight: 600;
      transition: background 0.3s, transform 0.2s, scale 0.2s;
      border: none;
      cursor: pointer;
    }
    .btn-primary:hover, .btn-primary:active {
      background: var(--primary-mid);
      transform: scale(1.05);
    }
    .btn-green {
      background: var(--primary-light);
      color: var(--text-dark);
    }
    .btn-green:hover, .btn-green:active {
      background: var(--primary-mid);
      transform: scale(1.05);
    }
    @media (max-width: 768px) {
      .sticky-header {
        padding: 0.75rem 1rem;
      }
      .nav-links {
        display: none;
        flex-direction: column;
        position: absolute;
        top: 60px;
        left: 0;
        right: 0;
        width: 100%;
        background: var(--primary-dark);
        padding: 1rem;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
        transition: opacity 0.2s ease, transform 0.2s ease;
      }
      .nav-links.active {
        display: flex;
        opacity: 1;
        transform: translateX(0);
      }
      .nav-links:not(.active) {
        opacity: 0;
        transform: translateX(-100%);
      }
      .nav-links a {
        padding: 0.75rem;
        margin: 0.25rem 0;
        text-align: center;
        font-size: 1rem;
      }
      .hamburger {
        display: block;
      }
      .theme-toggle {
        font-size: 1.2rem;
      }
      .three-canvas {
        height: 180px;
        max-width: 90vw;
      }
      .section {
        padding: 3rem 1rem;
      }
      body {
        padding-top: 60px;
      }
    }
    @media (max-width: 480px) {
      .sticky-header {
        padding: 0.5rem 0.75rem;
      }
      .nav-links {
        top: 50px;
      }
      .nav-links a {
        font-size: 0.9rem;
        padding: 0.5rem;
      }
      .three-canvas {
        height: 150px;
        max-width: 85vw;
      }
      .section {
        padding: 2rem 0.75rem;
      }
      body {
        padding-top: 50px;
      }
      h1 {
        font-size: 2.5rem;
      }
      h2 {
        font-size: 2rem;
      }
      p {
        font-size: 1rem;
      }
      .btn-primary, .btn-green {
        padding: 0.5rem 1.5rem;
        font-size: 0.9rem;
      }
    }
    @keyframes slide-in {
      from { transform: translateY(40px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }
    @keyframes fade-in {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.08); }
      100% { transform: scale(1); }
    }
    @keyframes shimmer {
      0% { left: -100%; }
      20% { left: 100%; }
      100% { left: 100%; }
    }
    @keyframes orbit {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    .animate-slide-in { animation: slide-in 0.7s ease-out; }
    .animate-fade-in { animation: fade-in 0.9s ease-out; }
    .animate-pulse { animation: pulse 2.5s infinite; }
    .nav-links.active { animation: menu-slide 0.3s ease-out; }
    .gradient-bg {
      background: linear-gradient(270deg, var(--primary-dark), var(--primary-mid), var(--primary-light));
      background-size: 600% 600%;
      animation: gradient-shift 15s ease infinite;
    }
    .section#home { background-image: url('data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"%3E%3Cpath fill="%23328e6e" fill-opacity="0.3" d="M0,64L48,80C96,96,192,128,288,128C384,128,480,96,576,85.3C672,75,768,85,864,90.7C960,96,1056,96,1152,85.3C1248,75,1344,53,1392,42.7L1440,32L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"%3E%3C/path%3E%3C/svg%3E'); }
    .section#courses { background-image: url('data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"%3E%3Cpath fill="%2367ae6e" fill-opacity="0.3" d="M0,128L48,117.3C96,107,192,85,288,85.3C384,85,480,107,576,117.3C672,128,768,128,864,117.3C960,107,1056,85,1152,74.7C1248,64,1344,64,1392,64L1440,64L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"%3E%3C/path%3E%3C/svg%3E'); }
    .section#global-programs { background-image: url('data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"%3E%3Cpath fill="%2390c67c" fill-opacity="0.3" d="M0,192L48,176C96,160,192,128,288,117.3C384,107,480,117,576,128C672,139,768,149,864,149.3C960,149,1056,139,1152,128C1248,117,1344,107,1392,101.3L1440,96L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"%3E%3C/path%3E%3C/svg%3E'); }
    .neumorphic {
      background: var(--accent);
      box-shadow: 8px 8px 16px rgba(0, 0, 0, 0.1), -8px -8px 16px rgba(255, 255, 255, 0.5);
      border-radius: 12px;
    }
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      justify-content: center;
      align-items: center;
      z-index: 2000;
    }
    .modal-content {
      background: var(--accent);
      padding: 2rem;
      border-radius: 12px;
      text-align: center;
      max-width: 90vw;
      width: 100%;
      color: var(--text-dark);
    }
    .loading {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 40px;
      height: 40px;
      border: 4px solid var(--primary-mid);
      border-top: 4px solid var(--primary-dark);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    @keyframes spin {
      0% { transform: translate(-50%, -50%) rotate(0deg); }
      100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
  </style>
</head>
<body>
  <header class="sticky-header">
    <nav class="max-w-7xl mx-auto flex justify-between items-center px-4" role="navigation">
      <div class="logo text-3xl font-bold tracking-tight" aria-label="Brand logo">AI EcoLearn</div>
      <ul class="nav-links flex gap-4 flex-wrap" role="menu">
        <li><a href="#home" class="active" role="menuitem">Home</a></li>
        <li><a href="#courses" role="menuitem">Courses</a></li>
        <li><a href="#global-programs" role="menuitem">Global Programs</a></li>
        <li><a href="#community" role="menuitem">Community</a></li>
        <li><a href="#sessions" role="menuitem">Sessions</a></li>
        <li><a href="#internships" role="menuitem">Internships</a></li>
        <li><a href="#competitions" role="menuitem">Competitions</a></li>
        <li><a href="#content" role="menuitem">Content</a></li>
        <li><a href="#products" role="menuitem">Products</a></li>
        <li><a href="#ai-avatar" role="menuitem">AI Avatar</a></li>
        <li><a href="#image-to-3d" role="menuitem">Image to 3D</a></li>
        <li><a href="#camera-tutorial" role="menuitem">Camera Tutorial</a></li>
        <li><a href="#newsletter" role="menuitem">Newsletter</a></li>
      </ul>
      <div class="flex items-center gap-4">
        <button class="theme-toggle" aria-label="Toggle dark mode">ðŸŒ™</button>
        <div class="hamburger" aria-label="Toggle navigation menu" tabindex="0" role="button">â˜°</div>
      </div>
    </nav>
    <div class="scroll-progress"></div>
  </header>
  <button class="back-to-top" aria-label="Back to top">â†‘</button>

  <main>
    <!-- Home Section -->
    <section id="home" class="section gradient-bg text-center">
      <h1 class="text-6xl font-bold animate-slide-in">Welcome to AI EcoLearn</h1>
      <p class="text-2xl mt-6 max-w-3xl mx-auto animate-fade-in">Empower your future with AI-driven education, global connections, and sustainable products. Explore our interactive 3D experiences.</p>
      <a href="#courses" class="mt-8 inline-block btn-primary animate-pulse">Start Learning</a>
    </section>

    <!-- Courses Section -->
    <section id="courses" class="section bg-gray-900">
      <h2 class="text-5xl font-bold text-center animate-slide-in">Our Courses</h2>
      <p class="text-xl mt-4 max-w-2xl mx-auto text-center animate-fade-in">Choose from a variety of cutting-edge courses designed for the modern learner.</p>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mt-12 max-w-7xl mx-auto">
        <div class="card text-gray-900 neumorphic">
          <h3 class="text-2xl font-semibold">Web Development</h3>
          <p class="mt-3">Master HTML, CSS, and JavaScript to build responsive websites.</p>
          <button onclick="enrollCourse('Web Development')" class="mt-4 btn-primary">Enroll Now</button>
        </div>
        <div class="card text-gray-900 neumorphic">
          <h3 class="text-2xl font-semibold">Sustainable Design</h3>
          <p class="mt-3">Learn eco-friendly design principles for a greener future.</p>
          <button onclick="enrollCourse('Sustainable Design')" class="mt-4 btn-primary">Enroll Now</button>
        </div>
        <div class="card text-gray-900 neumorphic">
          <h3 class="text-2xl font-semibold">AI & Machine Learning</h3>
          <p class="mt-3">Dive into AI with hands-on projects in neural networks.</p>
          <button onclick="enrollCourse('AI & Machine Learning')" class="mt-4 btn-primary">Enroll Now</button>
        </div>
        <div class="card text-gray-900 neumorphic">
          <h3 class="text-2xl font-semibold">Global Leadership</h3>
          <p class="mt-3">Develop skills to lead in a connected, global world.</p>
          <button onclick="enrollCourse('Global Leadership')" class="mt-4 btn-primary">Enroll Now</button>
        </div>
        <div class="card text-gray-900 neumorphic">
          <h3 class="text-2xl font-semibold">Civicly</h3>
          <p class="mt-3">Democracy isnâ€™t taught. We make it lived. Engage with gamified civic education, debates, and real-world actions.</p>
          <p class="mt-2 text-sm italic">Elevator Pitch: A platform turning Gen Z into active citizens with interactive challenges and local issue-based learning.</p>
          <p class="mt-2 text-sm">Revenue: B2B toolkits, B2C in-app purchases, CSR partnerships.</p>
          <p class="mt-2 text-sm">Prototype: Landing page, quiz, lesson, mockups, pitch deck.</p>
          <p class="mt-2 text-sm">Why It Wins: Tackles civic education gap, scalable, youth-centered.</p>
          <button onclick="enrollCourse('Civicly')" class="mt-4 btn-primary">Enroll Now</button>
        </div>
      </div>
      <p id="course-message" class="text-center mt-6 text-lg form-message"></p>
    </section>

    <!-- Enrollment Modal -->
    <div id="enrollment-modal" class="modal">
      <div class="modal-content">
        <h2 class="text-2xl font-bold">Confirm Enrollment</h2>
        <p class="mt-4">Are you sure you want to enroll in <span id="course-name"></span>?</p>
        <div class="flex gap-4 mt-6 justify-center">
          <button onclick="confirmEnrollment()" class="btn-primary">Yes, Enroll</button>
          <button onclick="closeModal()" class="btn-primary">Cancel</button>
        </div>
      </div>
    </div>

    <!-- Global Programs Section -->
    <section id="global-programs" class="section gradient-bg">
      <h2 class="text-5xl font-bold text-center animate-slide-in">Global Programs & University Connections</h2>
      <p class="text-xl mt-4 max-w-2xl mx-auto text-center animate-fade-in">Partner with top universities and join global learning initiatives.</p>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mt-12 max-w-4xl mx-auto">
        <div class="card text-gray-900 neumorphic">
          <h3 class="text-2xl font-semibold">Study Abroad Programs</h3>
          <p class="mt-3">Collaborate with international universities for immersive learning.</p>
          <a href="#contact" class="mt-4 inline-block btn-primary">Learn More</a>
        </div>
        <div class="card text-gray-900 neumorphic">
          <h3 class="text-2xl font-semibold">Research Partnerships</h3>
          <p class="mt-3">Work with leading academics on cutting-edge projects.</p>
          <a href="#contact" class="mt-4 inline-block btn-primary">Join Now</a>
        </div>
      </div>
    </section>

    <!-- Community Section -->
    <section id="community" class="section bg-gray-900">
      <h2 class="text-5xl font-bold text-center animate-slide-in">Community & Networking</h2>
      <p class="text-xl mt-4 max-w-2xl mx-auto text-center animate-fade-in">Connect with learners and professionals worldwide.</p>
      <div class="max-w-3xl mx-auto mt-12">
        <div class="flex flex-col gap-4 neumorphic p-6 rounded-lg">
          <input id="post-input" type="text" placeholder="Share your thoughts..." class="form-input">
          <button onclick="addPost()" class="btn-primary">Post</button>
        </div>
        <div id="community-feed" class="mt-8"></div>
      </div>
    </section>

    <!-- One-to-One Sessions Section -->
    <section id="sessions" class="section gradient-bg">
      <h2 class="text-5xl font-bold text-center animate-slide-in">One-to-One Sessions</h2>
      <p class="text-xl mt-4 max-w-2xl mx-auto text-center animate-fade-in">Book personalized sessions with our expert mentors.</p>
      <div class="max-w-md mx-auto mt-12 card text-gray-900 neumorphic">
        <label for="session-date" class="block text-lg font-semibold">Select a Date</label>
        <input id="session-date" type="date" class="form-input mt-2">
        <label for="session-time" class="block text-lg font-semibold mt-4">Select Time</label>
        <select id="session-time" class="form-input mt-2">
          <option value="9am">9:00 AM</option>
          <option value="11am">11:00 AM</option>
          <option value="2pm">2:00 PM</option>
          <option value="4pm">4:00 PM</option>
        </select>
        <label for="session-type" class="block text-lg font-semibold mt-4">Session Type</label>
        <select id="session-type" class="form-input mt-2">
          <option value="career">Career Coaching</option>
          <option value="technical">Technical Guidance</option>
          <option value="design">Design Feedback</option>
        </select>
        <button onclick="bookSession()" class="mt-6 btn-primary">Book Now</button>
        <p id="session-message" class="mt-4 text-center form-message"></p>
      </div>
    </section>

    <!-- Internships Section -->
    <section id="internships" class="section bg-gray-900">
      <h2 class="text-5xl font-bold text-center animate-slide-in">Internships & Mentorship</h2>
      <p class="text-xl mt-4 max-w-2xl mx-auto text-center animate-fade-in">Gain real-world experience with our industry partners.</p>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mt-12 max-w-7xl mx-auto">
        <div class="card text-gray-900 neumorphic">
          <h3 class="text-2xl font-semibold">Tech Internship</h3>
          <p class="mt-3">Work with leading tech companies on innovative projects.</p>
          <a href="#contact" class="mt-4 inline-block btn-primary">Apply</a>
        </div>
        <div class="card text-gray-900 neumorphic">
          <h3 class="text-2xl font-semibold">Design Internship</h3>
          <p class="mt-3">Create impactful designs with top agencies.</p>
          <a href="#contact" class="mt-4 inline-block btn-primary">Apply</a>
        </div>
        <div class="card text-gray-900 neumorphic">
          <h3 class="text-2xl font-semibold">Mentorship Program</h3>
          <p class="mt-3">Get personalized guidance from industry leaders.</p>
          <a href="#contact" class="mt-4 inline-block btn-primary">Join</a>
        </div>
      </div>
    </section>

    <!-- Competitions Section -->
    <section id="competitions" class="section gradient-bg">
      <h2 class="text-5xl font-bold text-center animate-slide-in">Competition Preparation</h2>
      <p class="text-xl mt-4 max-w-2xl mx-auto text-center animate-fade-in">Train with experts to excel in global competitions.</p>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mt-12 max-w-4xl mx-auto">
        <div class="card text-gray-900 neumorphic">
          <h3 class="text-2xl font-semibold">Coding Challenge</h3>
          <p class="mt-3">Prepare for hackathons and coding competitions.</p>
          <a href="#contact" class="mt-4 inline-block btn-primary">Join</a>
        </div>
        <div class="card text-gray-900 neumorphic">
          <h3 class="text-2xl font-semibold">Design Contest</h3>
          <p class="mt-3">Showcase your creativity in global design challenges.</p>
          <a href="#contact" class="mt-4 inline-block btn-primary">Join</a>
        </div>
      </div>
    </section>

    <!-- Educational Content Section -->
    <section id="content" class="section bg-gray-900">
      <h2 class="text-5xl font-bold text-center animate-slide-in">Interactive Educational Content</h2>
      <p class="text-xl mt-4 max-w-2xl mx-auto text-center animate-fade-in">Engage with dynamic learning resources tailored to you.</p>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mt-12 max-w-7xl mx-auto">
        <div class="card text-gray-900 neumorphic">
          <h3 class="text-2xl font-semibold">Video Tutorials</h3>
          <p class="mt-3">High-quality video lessons for all skill levels.</p>
          <a href="#contact" class="mt-4 inline-block btn-primary">Watch</a>
        </div>
        <div class="card text-gray-900 neumorphic">
          <h3 class="text-2xl font-semibold">Interactive Quizzes</h3>
          <p class="mt-3">Test your knowledge with engaging quizzes.</p>
          <a href="#contact" class="mt-4 inline-block btn-primary">Try Now</a>
        </div>
        <div class="card text-gray-900 neumorphic">
          <h3 class="text-2xl font-semibold">Live Workshops</h3>
          <p class="mt-3">Hands-on sessions with industry experts.</p>
          <a href="#contact" class="mt-4 inline-block btn-primary">Join</a>
        </div>
        <div class="card text-gray-900 neumorphic">
          <h3 class="text-2xl font-semibold">AI-Powered Labs</h3>
          <p class="mt-3">Experiment with AI-driven simulations.</p>
          <a href="#contact" class="mt-4 inline-block btn-primary">Explore</a>
        </div>
      </div>
      <!-- Solar System Explorer -->
      <div class="mt-16 max-w-3xl mx-auto card text-gray-900 neumorphic">
        <h3 class="text-2xl font-semibold text-center">Solar System Explorer</h3>
        <p class="mt-3 text-center">Explore a 3D solar system model inspired by NASA data (Screenshot 2025-07-02 121956.png). Drag to rotate, scroll to zoom.</p>
        <div id="solar-system" class="three-canvas mt-4" data-tooltip="Click planets to highlight orbits"></div>
        <div class="flex gap-4 mt-4 justify-center">
          <button onclick="togglePlanetLabels()" class="btn-primary">Toggle Labels</button>
          <button onclick="resetSolarView()" class="btn-primary">Reset View</button>
          <input id="solar-speed" type="range" min="0.001" max="0.05" step="0.001" value="0.01" class="w-32">
        </div>
      </div>
      <!-- Interactive 3D Tutorial -->
      <div class="mt-16 max-w-3xl mx-auto card text-gray-900 neumorphic">
        <h3 class="text-2xl font-semibold text-center">Interactive 3D Tutorial</h3>
        <p class="mt-3 text-center">Learn 3D visualization with helpers (Screenshot 2025-07-02 122121.png). Drag to rotate, scroll to zoom.</p>
        <div id="3d-tutorial" class="three-canvas mt-4" data-tooltip="Toggle helpers for advanced views"></div>
        <div class="flex gap-4 mt-4 justify-center">
          <button onclick="changeTutorialColor()" class="btn-primary">Change Color</button>
          <button onclick="toggleNormalsHelper()" class="btn-primary">Toggle Normals</button>
          <button onclick="resetTutorialView()" class="btn-primary">Reset View</button>
          <input id="rotation-speed" type="range" min="0" max="0.05" step="0.001" value="0.01" class="w-32">
          <input id="color-picker" type="color" value="#32ce6e" class="w-10 h-10">
        </div>
      </div>
    </section>

    <!-- Eco-friendly Products Section -->
    <section id="products" class="section gradient-bg">
      <h2 class="text-5xl font-bold text-center animate-slide-in">Eco-friendly Products</h2>
      <p class="text-xl mt-4 max-w-2xl mx-auto text-center animate-fade-in">Shop sustainable products designed with the planet in mind.</p>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mt-12 max-w-7xl mx-auto">
        <div class="card text-gray-900 neumorphic" title="This is a 3D model of a recycled notebook.">
          <h3 class="text-2xl font-semibold">Recycled Notebook</h3>
          <div id="3d-notebook" class="three-canvas"></div>
          <p class="mt-3">Made from 100% recycled paper - $19.99</p>
          <a href="#contact" class="mt-4 inline-block btn-green">Shop Now</a>
        </div>
        <div class="card text-gray-900 neumorphic" title="This is a 3D model of a reusable bottle.">
          <h3 class="text-2xl font-semibold">Reusable Bottle</h3>
          <div id="3d-bottle" class="three-canvas"></div>
          <p class="mt-3">Stainless steel, BPA-free - $29.99</p>
          <a href="#contact" class="mt-4 inline-block btn-green">Shop Now</a>
        </div>
        <div class="card text-gray-900 neumorphic" title="This is a 3D model of a bamboo pen.">
          <h3 class="text-2xl font-semibold">Bamboo Pen</h3>
          <div id="3d-pen" class="three-canvas"></div>
          <p class="mt-3">Biodegradable bamboo - $9.99</p>
          <a href="#contact" class="mt-4 inline-block btn-green">Shop Now</a>
        </div>
        <div class="card text-gray-900 neumorphic" title="This is a 3D model of a recycled bag.">
          <h3 class="text-2xl font-semibold">Recycled Bag</h3>
          <div id="3d-bag" class="three-canvas"></div>
          <p class="mt-3">Durable, made from recycled plastics - $39.99</p>
          <a href="#contact" class="mt-4 inline-block btn-green">Shop Now</a>
        </div>
        <div class="card text-gray-900 neumorphic" title="This is a 3D model of an eco tote.">
          <h3 class="text-2xl font-semibold">Eco Tote</h3>
          <div id="3d-tote" class="three-canvas"></div>
          <p class="mt-3">Organic cotton tote bag - $24.99</p>
          <a href="#contact" class="mt-4 inline-block btn-green">Shop Now</a>
        </div>
        <div class="card text-gray-900 neumorphic" title="This is a 3D model of a solar charger.">
          <h3 class="text-2xl font-semibold">Solar Charger</h3>
          <div id="3d-charger" class="three-canvas"></div>
          <p class="mt-3">Portable solar-powered charger - $49.99</p>
          <a href="#contact" class="mt-4 inline-block btn-green">Shop Now</a>
        </div>
        <div class="card text-gray-900 neumorphic" title="This is a 3D model of wooden sunglasses.">
          <h3 class="text-2xl font-semibold">Wooden Sunglasses</h3>
          <div id="3d-sunglasses" class="three-canvas"></div>
          <p class="mt-3">Sustainable bamboo sunglasses - $59.99</p>
          <a href="#contact" class="mt-4 inline-block btn-green">Shop Now</a>
        </div>
        <div class="card text-gray-900 neumorphic" title="This is a 3D model of an eco straw set.">
          <h3 class="text-2xl font-semibold">Eco Straw Set</h3>
          <div id="3d-straw" class="three-canvas"></div>
          <p class="mt-3">Reusable stainless steel straws - $14.99</p>
          <a href="#contact" class="mt-4 inline-block btn-green">Shop Now</a>
        </div>
      </div>
      <!-- Interactive 3D Tutorial -->
      <div class="mt-16 max-w-3xl mx-auto card text-gray-900 neumorphic">
        <h3 class="text-2xl font-semibold text-center">Interactive 3D Tutorial</h3>
        <p class="mt-3 text-center">Learn to interact with 3D models: drag to rotate, scroll to zoom, click to change color. Use helpers for advanced visualization.</p>
        <div id="3d-tutorial" class="three-canvas mt-4"></div>
        <div class="flex gap-4 mt-4 justify-center">
          <button onclick="changeTutorialColor()" class="btn-primary">Change Color</button>
          <button onclick="toggleNormalsHelper()" class="btn-primary">Toggle Normals</button>
          <button onclick="resetTutorialView()" class="btn-primary">Reset View</button>
          <input id="rotation-speed" type="range" min="0" max="0.05" step="0.001" value="0.01" class="w-32">
          <input id="color-picker" type="color" value="#32ce6e" class="w-10 h-10">
        </div>
      </div>
    </section>

    <!-- AI Avatar Generator Section -->
    <section id="ai-avatar" class="section bg-gray-900">
      <h2 class="text-5xl font-bold text-center animate-slide-in">AI Avatar Generator</h2>
      <p class="text-xl mt-4 max-w-2xl mx-auto text-center animate-fade-in">Create a unique 3D avatar by describing your character (e.g., "futuristic cyborg, neon blue hair").</p>
      <div class="max-w-3xl mx-auto mt-12 card text-gray-900 neumorphic">
        <input id="avatar-prompt" type="text" placeholder="Describe your avatar..." class="form-input">
        <button onclick="generateAvatar()" class="mt-4 btn-primary">Generate Avatar</button>
        <div id="avatar-container" class="three-canvas mt-4"></div>
        <p id="avatar-message" class="mt-4 text-center form-message"></p>
      </div>
    </section>

    <!-- Image to 3D Section -->
    <section id="image-to-3d" class="section gradient-bg">
      <h2 class="text-5xl font-bold text-center animate-slide-in">Image to 3D Model</h2>
      <p class="text-xl mt-4 max-w-2xl mx-auto text-center animate-fade-in">Upload an image to convert it to a 3D model (simulated).</p>
      <div class="max-w-3xl mx-auto mt-12 card text-gray-900 neumorphic">
        <input id="image-upload" type="file" accept="image/*" class="form-input">
        <select id="3d-geometry" class="form-input mt-4">
          <option value="box">Box</option>
          <option value="sphere">Sphere</option>
          <option value="cylinder">Cylinder</option>
          <option value="cone">Cone</option>
        </select>
        <button onclick="convertImageTo3D()" class="mt-4 btn-primary">Convert to 3D</button>
        <div id="3d-image-container" class="three-canvas mt-4"></div>
        <p id="image-3d-message" class="mt-4 text-center form-message"></p>
      </div>
    </section>

    <!-- Camera Tutorial Section -->
    <section id="camera-tutorial" class="section bg-gray-900">
      <h2 class="text-5xl font-bold text-center animate-slide-in">Camera Tutorial</h2>
      <p class="text-xl mt-4 max-w-2xl mx-auto text-center animate-fade-in">Master camera controls inspired by Three.js Camera (Screenshot 2025-07-02 121815.png). Adjust perspectives and animations.</p>
      <div class="max-w-3xl mx-auto mt-12 card text-gray-900 neumorphic">
        <div id="camera-demo" class="three-canvas mt-4" data-tooltip="Adjust camera angles"></div>
        <div class="flex gap-4 mt-4 justify-center">
          <button onclick="switchCameraView()" class="btn-primary">Switch View</button>
          <button onclick="resetCameraView()" class="btn-primary">Reset View</button>
          <input id="camera-angle" type="range" min="0" max="90" step="1" value="45" class="w-32">
        </div>
      </div>
    </section>

    <!-- Newsletter Signup Section -->
    <section id="newsletter" class="section gradient-bg">
      <h2 class="text-5xl font-bold text-center animate-slide-in">Stay Updated</h2>
      <p class="text-xl mt-4 max-w-2xl mx-auto text-center animate-fade-in">Subscribe to our newsletter for the latest updates and offers.</p>
      <div class="max-w-md mx-auto mt-12 card text-gray-900 neumorphic">
        <input id="newsletter-email" type="email" placeholder="Your Email" class="form-input">
        <button onclick="subscribeNewsletter()" class="mt-4 btn-primary">Subscribe</button>
        <p id="newsletter-message" class="mt-4 text-center form-message"></p>
      </div>
    </section>
  </main>

  <footer class="py-8 bg-gray-800 text-center">
    <p class="text-lg">Â© 2025 AI EcoLearn. All rights reserved.</p>
    <p class="mt-2 text-sm">Inspired by cutting-edge design and AI innovation.</p>
  </footer>

  <script>
    // Navigation
    const hamburger = document.querySelector('.hamburger');
    const navLinks = document.querySelector('.nav-links');
    const header = document.querySelector('.sticky-header');
    const themeToggle = document.querySelector('.theme-toggle');
    const scrollProgress = document.querySelector('.scroll-progress');
    const backToTop = document.querySelector('.back-to-top');
    let lastScrollY = window.scrollY;

    // Initialize navigation state
    function initializeNav() {
      const isMobile = window.innerWidth <= 768;
      if (isMobile) {
        navLinks.classList.remove('active');
        hamburger.classList.remove('active');
        hamburger.setAttribute('aria-expanded', 'false');
      } else {
        navLinks.classList.remove('active');
        hamburger.classList.remove('active');
        header.classList.remove('hidden');
      }
      updateScrollProgress();
      applyDarkMode();
    }

    // Debounce function for performance
    function debounce(func, wait) {
      let timeout;
      return function executedFunction(...args) {
        const later = () => {
          clearTimeout(timeout);
          func(...args);
        };
        clearTimeout(timeout);
        timeout = setTimeout(later, wait);
      };
    }

    // Update scroll progress bar and parallax effect
    function updateScrollProgress() {
      const scrollTop = window.scrollY;
      const docHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
      const progress = (scrollTop / docHeight) * 100;
      scrollProgress.style.width = `${progress}%`;
      backToTop.classList.toggle('visible', scrollTop > 300);
      document.querySelectorAll('.section').forEach(section => {
        const rect = section.getBoundingClientRect();
        const offset = rect.top / window.innerHeight * 100;
        section.style.setProperty('--parallax-offset', `${offset * 0.2}px`);
      });
    }

    // Handle scroll behavior
    function handleScroll() {
      const currentScrollY = window.scrollY;
      const threshold = window.innerWidth <= 480 ? 40 : window.innerWidth <= 768 ? 60 : 100;
      if (currentScrollY > lastScrollY && currentScrollY > threshold) {
        header.classList.add('hidden');
        navLinks.classList.remove('active');
        hamburger.classList.remove('active');
        hamburger.setAttribute('aria-expanded', 'false');
      } else if (currentScrollY < lastScrollY && currentScrollY > 0) {
        header.classList.remove('hidden');
      }
      header.classList.toggle('scrolled', currentScrollY > 50);
      updateScrollProgress();
      lastScrollY = currentScrollY;
    }

    // Toggle dark mode
    function toggleDarkMode() {
      const isDark = !document.body.classList.contains('dark-mode');
      document.body.classList.toggle('dark-mode', isDark);
      themeToggle.textContent = isDark ? 'â˜€ï¸' : 'ðŸŒ™';
      localStorage.setItem('darkMode', isDark);
      applyDarkMode();
    }

    // Apply dark mode to all elements
    function applyDarkMode() {
      const isDark = localStorage.getItem('darkMode') === 'true' || (!localStorage.getItem('darkMode') && window.matchMedia('(prefers-color-scheme: dark)').matches);
      document.body.classList.toggle('dark-mode', isDark);
      themeToggle.textContent = isDark ? 'â˜€ï¸' : 'ðŸŒ™';
      document.querySelectorAll('.card, .neumorphic, .modal-content').forEach(el => {
        el.style.background = isDark ? '#2e4a47' : 'var(--accent)';
        el.style.color = isDark ? 'var(--text-light)' : 'var(--text-dark)';
      });
      if (!localStorage.getItem('darkMode')) localStorage.setItem('darkMode', isDark);
    }

    // Event listeners
    window.addEventListener('load', () => {
      initializeNav();
      applyDarkMode();
    });
    window.addEventListener('resize', initializeNav);
    window.addEventListener('scroll', debounce(handleScroll, 10));
    hamburger.addEventListener('click', () => {
      navLinks.classList.toggle('active');
      hamburger.classList.toggle('active');
      hamburger.setAttribute('aria-expanded', navLinks.classList.contains('active') ? 'true' : 'false');
      header.classList.remove('hidden');
    });
    themeToggle.addEventListener('click', toggleDarkMode);
    backToTop.addEventListener('click', () => {
      window.scrollTo({ top: 0, behavior: 'smooth' });
    });
    navLinks.querySelectorAll('a').forEach(link => {
      link.addEventListener('click', () => {
        navLinks.querySelectorAll('a').forEach(l => l.classList.remove('active'));
        link.classList.add('active');
        navLinks.classList.remove('active');
        hamburger.classList.remove('active');
        hamburger.setAttribute('aria-expanded', 'false');
        header.classList.remove('hidden');
      });
    });
    hamburger.addEventListener('keydown', (e) => {
      if (e.key === 'Enter' || e.key === ' ') {
        e.preventDefault();
        navLinks.classList.toggle('active');
        hamburger.classList.toggle('active');
        hamburger.setAttribute('aria-expanded', navLinks.classList.contains('active') ? 'true' : 'false');
        header.classList.remove('hidden');
      }
    });

    // Course Enrollment
    let currentCourse = '';
    function enrollCourse(course) {
      currentCourse = course;
      const modal = document.getElementById('enrollment-modal');
      const courseName = document.getElementById('course-name');
      courseName.textContent = course;
      modal.style.display = 'flex';
      header.classList.remove('hidden');
    }
    function confirmEnrollment() {
      const message = document.getElementById('course-message');
      message.textContent = `Successfully enrolled in ${currentCourse}!`;
      message.style.color = 'rgb(50, 142, 110)';
      setTimeout(() => message.textContent = '', 3000);
      closeModal();
    }
    function closeModal() {
      const modal = document.getElementById('enrollment-modal');
      modal.style.display = 'none';
    }

    // Community Feed
    let posts = [
      { text: 'Welcome to AI EcoLearn!', comments: ['Excited to join!', 'Great platform!'], timestamp: new Date().toLocaleString(), likes: 0 },
      { text: 'Just enrolled in the AI course!', comments: ['Awesome choice!', 'Howâ€™s it going?'], timestamp: new Date().toLocaleString(), likes: 0 },
      { text: 'Loving the eco-friendly products!', comments: ['The notebook is amazing!'], timestamp: new Date().toLocaleString(), likes: 0 }
    ];
    function renderPosts() {
      const feed = document.getElementById('community-feed');
      feed.innerHTML = posts.map((post, idx) => `
        <div class="card text-gray-900 neumorphic mb-6">
          <p class="text-lg">${post.text}</p>
          <p class="text-sm text-gray-600 mt-2">${post.timestamp}</p>
          <p class="text-sm text-gray-600 mt-2">Likes: ${post.likes}</p>
          <button onclick="likePost(${idx})" class="mt-2 btn-primary">Like</button>
          <p class="text-sm text-gray-600 mt-2">${post.comments.join(', ')}</p>
          <input id="comment-${idx}" type="text" placeholder="Add a comment..." class="form-input mt-3">
          <button onclick="addComment(${idx})" class="mt-2 btn-primary">Comment</button>
        </div>
      `).join('');
    }
    function addPost() {
      const input = document.getElementById('post-input');
      if (input.value) {
        posts.push({ text: input.value, comments: [], timestamp: new Date().toLocaleString(), likes: 0 });
        input.value = '';
        renderPosts();
      }
    }
    function addComment(idx) {
      const input = document.getElementById(`comment-${idx}`);
      if (input.value) {
        posts[idx].comments.push(input.value);
        input.value = '';
        renderPosts();
      }
    }
    function likePost(idx) {
      posts[idx].likes++;
      renderPosts();
    }
    renderPosts();

    // Session Booking
    function bookSession() {
      const dateInput = document.getElementById('session-date');
      const time = document.getElementById('session-time').value;
      const type = document.getElementById('session-type').value;
      const message = document.getElementById('session-message');
      const selectedDate = new Date(dateInput.value);
      const today = new Date();
      today.setHours(0, 0, 0, 0);
      if (!dateInput.value || selectedDate < today) {
        message.textContent = 'Please select a future date.';
        message.style.color = '#ef4444';
        return;
      }
      message.textContent = `Session booked for ${dateInput.value} at ${time} (${type})!`;
      message.style.color = 'rgb(50, 142, 110)';
      setTimeout(() => message.textContent = '', 3000);
    }

    // Newsletter Signup
    function subscribeNewsletter() {
      const emailInput = document.getElementById('newsletter-email');
      const message = document.getElementById('newsletter-message');
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailInput.value || !emailRegex.test(emailInput.value)) {
        message.textContent = 'Please enter a valid email address.';
        message.style.color = '#ef4444';
        return;
      }
      message.textContent = 'Subscribed successfully! Check your email for confirmation.';
      message.style.color = 'rgb(50, 142, 110)';
      emailInput.value = '';
      setTimeout(() => message.textContent = '', 5000);
    }

    // 3D Visualization Setup
    function create3DScene(containerId, geometryType, color, isSolarSystem = false, isCameraDemo = false) {
      const scene = new THREE.Scene();
      const camera = new THREE.PerspectiveCamera(75, window.innerWidth / 300, 0.1, 1000);
      const renderer = new THREE.WebGLRenderer({ alpha: true });
      const width = Math.min(window.innerWidth * 0.85, 400);
      renderer.setSize(width, 300);
      const container = document.getElementById(containerId);
      container.innerHTML = '<div class="loading"></div>';
      container.appendChild(renderer.domElement);

      let geometry, mesh, orbitPaths = [];
      if (isSolarSystem) {
        const sunGeometry = new THREE.SphereGeometry(1, 32, 32);
        const sunMaterial = new THREE.MeshBasicMaterial({ color: 0xffff00 });
        const sun = new THREE.Mesh(sunGeometry, sunMaterial);
        scene.add(sun);
        const planets = [
          { name: 'Mercury', radius: 0.2, distance: 2, color: 0x808080, speed: 0.02 },
          { name: 'Venus', radius: 0.3, distance: 3, color: 0xffa500, speed: 0.015 },
          { name: 'Earth', radius: 0.4, distance: 4, color: 0x0000ff, speed: 0.01 },
          { name: 'Mars', radius: 0.3, distance: 5, color: 0xff0000, speed: 0.008 }
        ];
        planets.forEach(p => {
          const planetGeometry = new THREE.SphereGeometry(p.radius, 32, 32);
          const planetMaterial = new THREE.MeshBasicMaterial({ color: p.color });
          const planet = new THREE.Mesh(planetGeometry, planetMaterial);
          planet.userData = { angle: 0, distance: p.distance, speed: p.speed, name: p.name };
          scene.add(planet);
          const orbitGeometry = new THREE.RingGeometry(p.distance - 0.1, p.distance + 0.1, 64);
          const orbitMaterial = new THREE.MeshBasicMaterial({ color: 0x404040, side: THREE.DoubleSide });
          const orbit = new THREE.Mesh(orbitGeometry, orbitMaterial);
          orbit.rotation.x = Math.PI / 2;
          scene.add(orbit);
          orbitPaths.push(orbit);
        });
        mesh = { sun, planets, orbitPaths };
      } else if (isCameraDemo) {
        geometry = new THREE.BoxGeometry(1.5, 1.5, 1.5);
        const material = new THREE.MeshStandardMaterial({ color: 0x32ce6e });
        mesh = new THREE.Mesh(geometry, material);
        scene.add(mesh);
        camera.position.set(0, 0, 5);
      } else {
        switch (geometryType) {
          case 'torusKnot': geometry = new THREE.TorusKnotGeometry(1, 0.3, 100, 16); break;
          case 'sphere': geometry = new THREE.SphereGeometry(1, 32, 32); break;
          case 'cylinder': geometry = new THREE.CylinderGeometry(0.5, 0.5, 2, 32); break;
          case 'box': geometry = new THREE.BoxGeometry(1.5, 1.5, 1.5); break;
          case 'cone': geometry = new THREE.ConeGeometry(1, 2, 32); break;
          case 'dodecahedron': geometry = new THREE.DodecahedronGeometry(1); break;
          case 'octahedron': geometry = new THREE.OctahedronGeometry(1); break;
          case 'tetrahedron': geometry = new THREE.TetrahedronGeometry(1); break;
        }
        const material = new THREE.MeshStandardMaterial({ color, roughness: 0.4, metalness: 0.2 });
        mesh = new THREE.Mesh(geometry, material);
        scene.add(mesh);
      }
      const light1 = new THREE.PointLight(0xffffff, 1, 100);
      light1.position.set(5, 5, 5);
      scene.add(light1);
      const light2 = new THREE.AmbientLight(0x404040);
      scene.add(light2);
      camera.position.z = isSolarSystem ? 10 : isCameraDemo ? 5 : 5;

      const controls = new THREE.OrbitControls(camera, renderer.domElement);
      controls.enableDamping = true;
      controls.dampingFactor = 0.05;
      controls.enableZoom = true;
      controls.minDistance = 2;
      controls.maxDistance = isSolarSystem ? 15 : 10;

      let helper = null;
      function animate() {
        requestAnimationFrame(animate);
        if (isSolarSystem && mesh.planets) {
          const speed = parseFloat(document.getElementById('solar-speed')?.value || 0.01);
          mesh.planets.forEach(p => {
            p.userData.angle += p.userData.speed * speed;
            const planet = scene.children.find(m => m.userData && m.userData.angle === p.userData.angle);
            if (planet) {
              planet.position.x = Math.cos(p.userData.angle) * p.userData.distance;
              planet.position.z = Math.sin(p.userData.angle) * p.userData.distance;
            }
          });
        } else if (mesh.rotation) {
          const speed = parseFloat(document.getElementById('rotation-speed')?.value || 0.01);
          mesh.rotation.x += speed;
          mesh.rotation.y += speed;
        } else if (isCameraDemo) {
          const angle = parseFloat(document.getElementById('camera-angle')?.value || 45) * (Math.PI / 180);
          camera.position.set(Math.sin(angle) * 5, 2, Math.cos(angle) * 5);
          camera.lookAt(mesh.position);
        }
        controls.update();
        if (helper) helper.update();
        renderer.render(scene, camera);
      }
      setTimeout(() => {
        container.querySelector('.loading').remove();
        animate();
      }, 1000);

      window.addEventListener('resize', () => {
        const width = Math.min(window.innerWidth * 0.85, 400);
        renderer.setSize(width, 300);
        camera.aspect = width / 300;
        camera.updateProjectionMatrix();
      });

      container.addEventListener('mousemove', (e) => {
        const rect = container.getBoundingClientRect();
        const x = (e.clientX - rect.left) / rect.width * 2 - 1;
        const y = -(e.clientY - rect.top) / rect.height * 2 + 1;
        camera.position.x += x * 0.1;
        camera.position.y += y * 0.1;
        camera.lookAt(scene.position);
      });

      return { scene, camera, mesh, renderer, helper };
    }

    // Lazy Load 3D Models with Intersection Observer
    const observerOptions = { root: null, rootMargin: '0px', threshold: 0.1 };
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const id = entry.target.id;
          if (id === 'products' && !scenes.notebook) {
            scenes.notebook = create3DScene('3d-notebook', 'torusKnot', 0x32ce6e);
            scenes.bottle = create3DScene('3d-bottle', 'cylinder', 0x67ae6e);
            scenes.pen = create3DScene('3d-pen', 'sphere', 0x90c67c);
            scenes.bag = create3DScene('3d-bag', 'box', 0x32ce6e);
            scenes.tote = create3DScene('3d-tote', 'cone', 0x67ae6e);
            scenes.charger = create3DScene('3d-charger', 'dodecahedron', 0x90c67c);
            scenes.sunglasses = create3DScene('3d-sunglasses', 'octahedron', 0x32ce6e);
            scenes.straw = create3DScene('3d-straw', 'tetrahedron', 0x67ae6e);
            scenes.tutorial = create3DScene('3d-tutorial', 'torusKnot', 0x32ce6e);
          } else if (id === 'content' && !scenes.solarSystem) {
            scenes.solarSystem = create3DScene('solar-system', 'sphere', 0xffff00, true);
          } else if (id === 'camera-tutorial' && !scenes.cameraDemo) {
            scenes.cameraDemo = create3DScene('camera-demo', 'box', 0x32ce6e, false, true);
          }
        }
      });
    }, observerOptions);
    document.querySelectorAll('.section').forEach(section => observer.observe(section));

    const scenes = {};

    // 3D Tutorial Controls
    function changeTutorialColor() {
      if (scenes.tutorial) {
        const colorPicker = document.getElementById('color-picker');
        scenes.tutorial.mesh.material.color.set(colorPicker.value);
      }
    }
    function toggleNormalsHelper() {
      if (scenes.tutorial && scenes.tutorial.mesh) {
        if (!scenes.tutorial.helper) {
          const helper = new THREE.VertexNormalsHelper(scenes.tutorial.mesh, 0.5, 0xff0000);
          scenes.tutorial.scene.add(helper);
          scenes.tutorial.helper = helper;
        } else {
          scenes.tutorial.scene.remove(scenes.tutorial.helper);
          scenes.tutorial.helper = null;
        }
      }
    }
    function resetTutorialView() {
      if (scenes.tutorial) {
        scenes.tutorial.mesh.rotation.set(0, 0, 0);
        scenes.tutorial.camera.position.set(0, 0, 5);
        scenes.tutorial.mesh.material.color.set(0x32ce6e);
        if (scenes.tutorial.helper) {
          scenes.tutorial.scene.remove(scenes.tutorial.helper);
          scenes.tutorial.helper = null;
        }
      }
    }

    // Solar System Controls
    function togglePlanetLabels() {
      if (scenes.solarSystem) {
        scenes.solarSystem.mesh.planets.forEach(p => {
          const planet = scenes.solarSystem.scene.children.find(m => m.userData && m.userData.angle === p.userData.angle);
          if (planet) planet.visible = !planet.visible;
          const orbit = scenes.solarSystem.mesh.orbitPaths.find(o => o.geometry.parameters.innerRadius === p.distance - 0.1);
          if (orbit) orbit.visible = !orbit.visible;
        });
      }
    }
    function resetSolarView() {
      if (scenes.solarSystem) {
        scenes.solarSystem.camera.position.set(0, 0, 10);
        scenes.solarSystem.mesh.planets.forEach(p => {
          const planet = scenes.solarSystem.scene.children.find(m => m.userData && m.userData.angle === p.userData.angle);
          if (planet) planet.position.set(0, 0, 0);
        });
      }
    }

    // Camera Demo Controls
    function switchCameraView() {
      if (scenes.cameraDemo) {
        scenes.cameraDemo.camera.position.set(5, 5, 5);
        scenes.cameraDemo.camera.lookAt(0, 0, 0);
      }
    }
    function resetCameraView() {
      if (scenes.cameraDemo) {
        scenes.cameraDemo.camera.position.set(0, 0, 5);
        scenes.cameraDemo.camera.lookAt(0, 0, 0);
      }
    }

    // AI Avatar Generator
    function generateAvatar() {
      const prompt = document.getElementById('avatar-prompt').value.toLowerCase();
      const message = document.getElementById('avatar-message');
      const container = document.getElementById('avatar-container');
      container.innerHTML = '';
      if (!prompt) {
        message.textContent = 'Please enter a description.';
        message.style.color = '#ef4444';
        return;
      }
      let geometryType = 'sphere';
      if (prompt.includes('cyborg')) geometryType = 'box';
      else if (prompt.includes('alien')) geometryType = 'cone';
      else if (prompt.includes('robot')) geometryType = 'cylinder';
      create3DScene('avatar-container', geometryType, 0x90c67c);
      message.textContent = `Generated avatar: ${prompt}`;
      message.style.color = 'rgb(50, 142, 110)';
      setTimeout(() => message.textContent = '', 5000);
    }

    // Image to 3D Model
    function convertImageTo3D() {
      const input = document.getElementById('image-upload');
      const geometry = document.getElementById('3d-geometry').value;
      const message = document.getElementById('image-3d-message');
      const container = document.getElementById('3d-image-container');
      container.innerHTML = '';
      if (!input.files || !input.files[0]) {
        message.textContent = 'Please upload an image.';
        message.style.color = '#ef4444';
        return;
      }
      create3DScene('3d-image-container', geometry, 0x67ae6e);
      message.textContent = `Converted image to 3D ${geometry}!`;
      message.style.color = 'rgb(50, 142, 110)';
      setTimeout(() => message.textContent = '', 5000);
      input.value = '';
    }
  </script>
</body>
</html>
